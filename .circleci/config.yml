version: 2
jobs:
  build:
    docker:
      - image: chef/chefdk:2.4.17
    steps:
      - checkout
      - run:
          name: Berkshelf Install
          command: chef exec berks install
      - run:
          name: Chef Cookstyle
          command: chef exec cookstyle
      - run:
          name: Chef Foodcritic
          command: chef exec foodcritic . -X spec -f any
      - run:
          name: Chefspec
          command: chef exec rspec -P spec/**/*_spec.rc --tty --color
      - run:
          name: Kitchen-ci
          command: echo chef exec kitchen test --destory always
